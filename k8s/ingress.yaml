apiVersion: networking.k8s.io/v1beta1
kind: Ingress
metadata:
  name: name-virtual-host-ingress
  namespace: development
spec:
  tls:
  - secretName: tls-foo-bar
  - secretName: tls-bar-foo
  rules:
  - host: foo.bar.com
    http:
      paths:
      - backend:
          serviceName: service1
          servicePort: 80
  - host: bar.foo.com
    http:
      paths:
      - backend:
          serviceName: service2
          servicePort: 80
---
apiVersion: v1
kind: Service
metadata:  
  name: service1
  namespace: development
spec:
  selector:    
    app: api1
  type: ClusterIP
  ports:  
  - name: http
    port: 80
    targetPort: 5000
    protocol: TCP
---
apiVersion: v1
kind: Service
metadata:  
  name: service2
  namespace: development
spec:
  selector:    
    app: api2
  type: ClusterIP
  ports:  
  - name: http
    port: 80
    targetPort: 5000
    protocol: TCP
---
apiVersion: v1
kind: Secret
metadata:
  name: tls-foo-bar
  namespace: development
data:
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUVGekNDQXYrZ0F3SUJBZ0lVV0hqbVhlQWN0Q1hRUmhMSWpsYmZCczVSclpVd0RRWUpLb1pJaHZjTkFRRUwKQlFBd2dab3hDekFKQmdOVkJBWVRBa1JGTVJZd0ZBWURWUVFJREExT2FXVmtaWEp6WVdOb2MyVnVNUkl3RUFZRApWUVFIREFsUGJHUmxibUoxY21jeEZUQVRCZ05WQkFvTURGbDFaV3R6Wld3Z1IyMWlTREVNTUFvR0ExVUVDd3dECmF6aHpNUlF3RWdZRFZRUUREQXRtYjI4dVltRnlMbU52YlRFa01DSUdDU3FHU0liM0RRRUpBUllWYTJWbWJHbDUKZFd0elpXeEFaMjFoYVd3dVkyOXRNQjRYRFRJd01ETXhOREV6TlRNd09Gb1hEVEl4TURNeE5ERXpOVE13T0ZvdwpnWm94Q3pBSkJnTlZCQVlUQWtSRk1SWXdGQVlEVlFRSURBMU9hV1ZrWlhKellXTm9jMlZ1TVJJd0VBWURWUVFICkRBbFBiR1JsYm1KMWNtY3hGVEFUQmdOVkJBb01ERmwxWld0elpXd2dSMjFpU0RFTU1Bb0dBMVVFQ3d3RGF6aHoKTVJRd0VnWURWUVFEREF0bWIyOHVZbUZ5TG1OdmJURWtNQ0lHQ1NxR1NJYjNEUUVKQVJZVmEyVm1iR2w1ZFd0egpaV3hBWjIxaGFXd3VZMjl0TUlJQklqQU5CZ2txaGtpRzl3MEJBUUVGQUFPQ0FROEFNSUlCQ2dLQ0FRRUF3MCs1Clc3Nmo2VHQycFVRdHNLM2VxcmdWQXRwNzFFTVFBdmhwQjFNVE5rdUR3QTVvOXpHNDFONTRBWEFDN2orZjlkRmQKcGFsTytSYWlrUFJ3L0Y0NjJ3cmpMS04yRm9qeTNPYitaS095QlVHTWVIVEVDZE1xOVpteGwxNUdEdUJYUmhQbAphWDVVaEVlNVAzdzA0eXZnZkU1RjNXZ0phL3UxVVhxanRZZVB1MXZKeWY3U2F0NjBSQ2hHQnU2VHZEVnBGRll0CmRIZjVCNk4xV0swN3c4MktvMWc5TkkycEE0RFNXdytqYStkUEpTYnJEdlJnWGx2QktTdnBNRitKY2RvTXk3R1EKVW5VT0JQbDB0S01GYS9jekFxTDUvek01bnFTMHhKa0MvQk1LTlJwUTRzU2psZktZYXRkNS9ud2pOSUVSMmJndApPZHQ1L3BrVlQxYVJId2tQbFFJREFRQUJvMU13VVRBZEJnTlZIUTRFRmdRVTNqOHJIQlpBRUxvSWc2Kyt2VllxCjBlT0NXOFl3SHdZRFZSMGpCQmd3Rm9BVTNqOHJIQlpBRUxvSWc2Kyt2VllxMGVPQ1c4WXdEd1lEVlIwVEFRSC8KQkFVd0F3RUIvekFOQmdrcWhraUc5dzBCQVFzRkFBT0NBUUVBb1RaMzBCQVpYQnhWNE1tcTQ2UCtvQXYrOFBHdQo4QU9Yd2JjYllkV0cyMjNubHNvVWxpcnJRNzNQNWNKdEN3Rlg1QWlqd2MrSmdiMHV1d3lOQTdTYlR4VE5TWTBZCk5PREY2VnhtQmh4R2ZMWVpPbTZmMjBlUlgwYnlTcHZRVEsxaTY3cWN6Y2k0MklSMmpnNi9leHNOOThuYkZWYVUKU3FSSWNYMGIxN3dlV04yQUxtN05pTWJFYlhuQkZ0K01NdW05SzNSL3MxaVhadEN4ek5xRk56MjZNZkVrSHVUTwp5ZGl1d0Rlc1pKY0krdkR1emFqcVpRTmliWXo0YlNyUlBxakcwZk5FVDRFTzdQck1oVDg4N3JjblJLYisrSk0xClY0ZzdmbzBjYmdrU1E3ZFFxMXBCSjJydGR0NnB4ZXlWVitnRTlBT1NmWWNaODBURlZpbHBUK01rT2c9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0t
  tls.key: LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUV2d0lCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktrd2dnU2xBZ0VBQW9JQkFRRERUN2xidnFQcE8zYWwKUkMyd3JkNnF1QlVDMm52VVF4QUMrR2tIVXhNMlM0UEFEbWozTWJqVTNuZ0JjQUx1UDUvMTBWMmxxVTc1RnFLUQo5SEQ4WGpyYkN1TXNvM1lXaVBMYzV2NWtvN0lGUVl4NGRNUUoweXIxbWJHWFhrWU80RmRHRStWcGZsU0VSN2svCmZEVGpLK0I4VGtYZGFBbHIrN1ZSZXFPMWg0KzdXOG5KL3RKcTNyUkVLRVlHN3BPOE5Xa1VWaTEwZC9rSG8zVlkKclR2RHpZcWpXRDAwamFrRGdOSmJENk5yNTA4bEp1c085R0JlVzhFcEsra3dYNGx4Mmd6THNaQlNkUTRFK1hTMApvd1ZyOXpNQ292bi9Nem1lcExURW1RTDhFd28xR2xEaXhLT1Y4cGhxMTNuK2ZDTTBnUkhadUMwNTIzbittUlZQClZwRWZDUStWQWdNQkFBRUNnZ0VCQUtPdTBOMCtyQWZ2T2NQUG02c1NUQ1l2R0F6SUpqY0I3UTFRT2xWVkhpakcKcUtmd2E2K2ZFQlAyVGdTR1p5NWNUQ2FyVEJ4bUJEVms3dUVrdXZ3RnpMVitMbDFlc0x5NkVTOW90NUtJVGMxeAozZE9scUJYRHo2RDlLWVIrRWFDdUN2WkQvbU9tNkJYa05qQXFXL2gyOFMrOE9Ya1FrN1RYd21HQ3NtaVVMN1VJCkJFMnQ1V1lVdkJPV3J1WXZNNXk3OEpOL016SXRsRmdTRFpCdHhEcUN2QTN5cGlKbzQ3TDFkWUJUYmRMOHoxczgKMFp0dDg2c1VvREd0a0tISEE2WVlIdHU5b1VMTWpieVFUSlZHZTJnWmJSUnFzbHVsWkV2NDh1QlB0ck00U2lQNQpPMTNRNWx1S0Fjb2ZrVjZFR1NMM3RTbk5wWUZIcUd2TEppd28vOWlzOXhFQ2dZRUE3aS9iaFVQbUZoYnFnaVAxCk80eDZzVkNyOENiUDdPSzZFaEUyVEZ2djRQTGo1VDFTUTg4RExDbWhmZmNQd3BCUyt5VkZRK3VNM2hVVUtIWEMKMkJOb2dNMVhwT1VtOVl2QWI3VGpYN3JnaFBGSU4rdWtsbUhqMHgwemdoc3JKN25aQmU3TytzdkNyaFpZWUcyYQp1RnFmY0hOeTc3QWFXcUNpd0NFU3RZZ0xVbzhDZ1lFQTBlc0JUSk1LU0VPUVdLU0J5b2V4anJ0TGZ6MlU3UGE4Cjg2Q3QwZVFkSzdwRWFON3hpVzVScGJmNnNXZTkzWklIelBrUlBRaUVoUXZjMDhSNTg5a2FabzZpYTlndXJaVWsKVWNSM0diZzVzQktmbENCMXY0MFZtdHRoNUNBT3Uzb2pxNjZqNHQwWEptWjJnZU5DNDdsaGk4UDJPd2F6WDc5RQpXVFlHV2ZOZVBac0NnWUVBNHA1aURFOW4wTWlJNHIxM2krckNxWVlKc1BvY2hsUEptWHNLNEdmd3VXUWZkSEo5Cm5NcVBTQ3RyM1Q5OW5TNVg1Visyb1VLeHluTGZ0UWNtRlJPU01Fb3ZBMUtMV01CWW5XL0xqYjl0OHM3bVdWNDQKUUdSdXNPUnRwM0pXQXZ3T0Fsa09VUXdnOUNXS2ZHU0wrcTh1VjMxZ2M3Qm53cVpuY3NtRTFYYlUzdjBDZ1lBaApzSXUyMUdwMENwUGlCaFRtZ2p5VzRheE9NWDN6UWU0MVUzWlNGMEF2UW1lMFJRT1N3T2ZOcHVkUERZMUZRQ2lNClZ2VFRUTWluNmExNU56RXpWNGFMS3gwYUhjbndCZDJjV2VHYmVSdVpESVFiNjlHNStsU2JVOVkwSElrQXdhdHoKNUVWZEpZcVBtU1l2MWw5bjJOcTA2YkJjN01oZzkzdHFyZWI3RExuMVBRS0JnUURHa2J6dzloeFI5UWh1ellsQgpXYmhPOWNCbkMxOElYOE9wazAwc0pzN0FJUFh5dS9lQzBTc2tFcEI0K25lUHZKS1NuU2FhbUhSMzVBL3doaDhvClQzUFY4VEc1SHNCYk1VcHlGZy9tdys0TEFLMldSRkJLZFF4V096VkNKMWNhWEIzbkhOUnYzU29XUEI1OTBzaUcKcWdoTUpNNnJxa3oxczdWS2RUdjF2UmIwRkE9PQotLS0tLUVORCBQUklWQVRFIEtFWS0tLS0t
type: kubernetes.io/tls
---
apiVersion: v1
kind: Secret
metadata:
  name: tls-bar-foo
  namespace: development
data:
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUVGekNDQXYrZ0F3SUJBZ0lVWUlqcFZrTGpoMm4vQXVOajFpODFtNmk3UnFrd0RRWUpLb1pJaHZjTkFRRUwKQlFBd2dab3hDekFKQmdOVkJBWVRBa1JGTVJZd0ZBWURWUVFJREExT2FXVmtaWEp6WVdOb2MyVnVNUkl3RUFZRApWUVFIREFsUGJHUmxibUoxY21jeEZUQVRCZ05WQkFvTURGbDFaV3R6Wld3Z1IyMWlTREVNTUFvR0ExVUVDd3dECmF6aHpNUlF3RWdZRFZRUUREQXRpWVhJdVptOXZMbU52YlRFa01DSUdDU3FHU0liM0RRRUpBUllWYTJWbWJHbDUKZFd0elpXeEFaMjFoYVd3dVkyOXRNQjRYRFRJd01ETXhOREV6TlRNMU1Gb1hEVEl4TURNeE5ERXpOVE0xTUZvdwpnWm94Q3pBSkJnTlZCQVlUQWtSRk1SWXdGQVlEVlFRSURBMU9hV1ZrWlhKellXTm9jMlZ1TVJJd0VBWURWUVFICkRBbFBiR1JsYm1KMWNtY3hGVEFUQmdOVkJBb01ERmwxWld0elpXd2dSMjFpU0RFTU1Bb0dBMVVFQ3d3RGF6aHoKTVJRd0VnWURWUVFEREF0aVlYSXVabTl2TG1OdmJURWtNQ0lHQ1NxR1NJYjNEUUVKQVJZVmEyVm1iR2w1ZFd0egpaV3hBWjIxaGFXd3VZMjl0TUlJQklqQU5CZ2txaGtpRzl3MEJBUUVGQUFPQ0FROEFNSUlCQ2dLQ0FRRUF4eDArClQ4enZNb0pEbFZueFdhVitwZUpCWHU4L0VkT2o3MDNXNHFSTDZjME9RY0pyeVp1eEpQWEVuWGFZa3AwV3BMSVoKbW5kSUVsSHBrWVlBVUJKZE1lTmZWc2tuRGtxYmxwQVNWY29KYTBYaHRvSTRPR0ZXODl4OU9FUElMU245Z2tRcgpWTXg4ZkwzcjVYTTN2UWhBZ3g0TWg5VDFoWFN0QlQ2ZWlGQkhZa3lyN21JVUlwQzJZRVROcG9sOVBWTGliTnVrCnRPQVl2SWQzNmRpU3JoVU5DL1IvR3dQK25QdkpHMi9vZEhsVUo2eCt2aU5Gd1dla2JTbkcyYnNYQlg4NGJFd1IKSHBtU3NldmFiWkZHVjlxVVAzd1UrcWVOT1pHcjJOblFTYVBXdGwyLzIxdERZRUFiRUd5a0cydXVNZGo4Y29vUwozZUNBNWs2dDlWQlRlcjk5M3dJREFRQUJvMU13VVRBZEJnTlZIUTRFRmdRVWxGWlhWNW1JYzZLdEtFSHBKenlrCmxGUU13U013SHdZRFZSMGpCQmd3Rm9BVWxGWlhWNW1JYzZLdEtFSHBKenlrbEZRTXdTTXdEd1lEVlIwVEFRSC8KQkFVd0F3RUIvekFOQmdrcWhraUc5dzBCQVFzRkFBT0NBUUVBV09TTnNFdEZid25tZXgvODlxUk45cjVNZkpSWQpnY1RQUEpCbHNBdFRhMEJIeVlYQ1dDZWNZL0graEFNdlNSOUdrTTdwTXpVUWp1QVpvREtOUnQ1ckxvT3lyN0duCkFjeWd1b2J0c0R2TEJxZVRRcEtPcC9HeElLVEFsSEIzVmlLaTFmK2V5czk0VGlSbjB2Wkx5NGV3Z1ZjbllkT3AKcUxkaFk3RVpJREphblFuR3NWMHJnSzRSdGo2bWEzLzZEQnZzTjRUWFZZQitTV3UzSXVWclQxaVFCc29UWDZDUgpFM00rSFAyQUVRbjNXT2lnVCtveUV4eHJIbWxhNEgyMXE4UHBUTGZScGcwUStkY203dGg5cy9oK2tDQ2kxS2hvCkNyY2Z1Z2I4d21YR3k2OWNUY09kOWVPenlFdjhBRmZkdlFuNnVKSWZrRTVtT0hXMWFIc203SjMwR3c9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0t
  tls.key: LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUV2UUlCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktjd2dnU2pBZ0VBQW9JQkFRREhIVDVQek84eWdrT1YKV2ZGWnBYNmw0a0ZlN3o4UjA2UHZUZGJpcEV2cHpRNUJ3bXZKbTdFazljU2RkcGlTblJha3NobWFkMGdTVWVtUgpoZ0JRRWwweDQxOVd5U2NPU3B1V2tCSlZ5Z2xyUmVHMmdqZzRZVmJ6M0gwNFE4Z3RLZjJDUkN0VXpIeDh2ZXZsCmN6ZTlDRUNESGd5SDFQV0ZkSzBGUHA2SVVFZGlUS3Z1WWhRaWtMWmdSTTJtaVgwOVV1SnMyNlMwNEJpOGgzZnAKMkpLdUZRMEw5SDhiQS82Yys4a2JiK2gwZVZRbnJINitJMFhCWjZSdEtjYlp1eGNGZnpoc1RCRWVtWkt4NjlwdAprVVpYMnBRL2ZCVDZwNDA1a2F2WTJkQkpvOWEyWGIvYlcwTmdRQnNRYktRYmE2NHgyUHh5aWhMZDRJRG1UcTMxClVGTjZ2MzNmQWdNQkFBRUNnZ0VCQUtFc1dia013UDVZbFU0NnJQT00wN1NCTGJzajNDQ1krUlVISkE3M1FQK3kKM1h4N1hQYW4wVCtDdFRGa3cySENTSWJ1SjIxeWFtTng3S2ZBR1ZhM1ZyckFPdmNzQWpJK1VDMFMxOVNib3Y0egpaZDV2RUFVTFBmQk5wUXE3U3pqTHlZbjlsam1oQUkrVXlITkZ6WE4xVDRzUzhyK3NzVVRpeWY3NXppZTNHK0ZECmtURnV6Sk01RnFrVlZiU2ExWWo0bkRFYXBENzdVVTh5cjdoL2ZtUkF0SHQrd0kvUkhYakR1amxySkU3aXZiZjAKb0JtRnkvbEFCMkxyempYbWVaUGRkQVZ1dW85RHdhdFpqcFROYzZabnFRMk5RWDZJb004cERRR0o3VWN5a3IzMAo1SkZFTzJZUHZTWkFTUERoejBwdVhlZFlPNDFTTVBQQWVHTFFGUlFWc0lFQ2dZRUErM3Q3M1FqdFZxSU1ETzdmCnQ3RVFjMzYzS2hObjlUNCtWalBGdUpHNSsyTTdsRW9ZdkJjeElLL3U0aTZ2R0hZNEtqMUNPSEZMa0xKczhITHEKc0ZsV0ZCNm5kZTJaN0N3UUZGaUFOcG0xVDFZQnlqSGRyVlhaNzJHaHcyaW9NZVdkaUNra2FHb0l0VFpYaDZDSApJTGl1d0NMQlA2QjNFdkNPUVM0Mkc4ZFQ5NThDZ1lFQXlyRHQ0T0l6ckdkYWtwQ0JMb3JMN3BZcVhDSkxUNkc1CjBCUU51NENkVlJMUjA4OGhWS3IrQVBFL1RLYWdxcERUZFpvMXVNa0hKUkxHL0VHTDV3TFYzOXNSSkVWaXhETmEKR043b1NDdXhZd1RLTWtCWWFrMVRHWVJ4RjE2UEM4S1d6MjkvNDdXYjRNMURZNWlTZkVoc0JlcmVRdlBxME12RQpDeVdueTVnWDBjRUNnWUJjakFiN1F1dkU5QUduU01rLzJvT0pYVnFldTJHSW1RMXJ2OFhGdEt0UzNpUHc0SXZWCnZGc3lBa3pSSkFqLzRaR3R5Ymx5K0E2dEExeWY2RXFCOTM1OERRUG5uRGNHK1BnNTVJL2FpQnAzUmRtR3hXOGsKK1BFbzdTOFFzSlVsTjdFUGlNU0RRSEpQN2Qyc1plRVVvNko3eHM2RFVkUkFQaEs3M2Z1L29VMC9WUUtCZ0VMTQpPRGpxa3hqNEhyTTZpRGdzYWJUQkxFaWN6TEQ3blY3am5QcjBFZVdkaENVSGwvWnRPN1JYelFLWHowOG0xMmxrClh0djg5Q3ZWbWxvN3g3MWtBOVA0UUJmeC9mQ204OFJLZ2NaM0Q4aVFKWXFXQmcxU1dsYUlmVFMwWnZQN052UTUKekszZ2hmUjU4UUY3b0pyd3l4alFKRnR3UXl4NFdxMUp4WmlsRVFTQkFvR0FXeHlla1dtS1NVUUJhYWdCQlNwaAp2WVhUTGJSdE1wK0xHL2VZcnNzWmxnQm11bnhiMWJlRVRsMnNTeWMxR1NqUTJaMTYwb1ZxOWN0dHd1NHlTZVpQCmdEN1BWMUpGbjlKdEU4bGE1TUlqaDNvU2FMbm01M1lQWEVUZSs4eFYwMnQ0TWlLSm1oUGdIVS9Pc05Ud1NwTEIKeTY1bk1rbFZjSUZHK3dERWorbmdjaG89Ci0tLS0tRU5EIFBSSVZBVEUgS0VZLS0tLS0=
type: kubernetes.io/tls
